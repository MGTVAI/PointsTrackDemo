# PointsTrackDemo
2020“马栏山”杯国际音视频算法大赛图像赛道demo

## 依赖
* [OpenCV](https://opencv.org/) python >= 3.4.2
* [OpenCV-Contrib-Python](https://pytorch.org/) >= 3.4.2

安装依赖
```sh
pip install -r requirements.txt
```

## 介绍与使用
1. baseline.py    baseline脚本
2. baseline.mp4   示例视频文件
3. target_points.txt   跟踪目标点，格式为：  frame_index x1,y1 x2,y2 x3,y3 x4,y4 （frame_index=0）
4. groundtruth.txt  gt 文件
4. results.txt  结果输出
5. preview.py  预览输出结果脚本
6. evaluate.py  评估单个结果脚本

### 运行 baseline.py:

```
python baseline.py baseline.mp4 target_points.txt results.txt
```
将得到 results.txt 且格式如下:  

格式如下：
```
frame_index x1,y1 x2,y2 x3,y3 x4,y4
frame_index 从0帧到最后一帧。
x{n},y{n} 代表四个点位，x与y之间,分隔；点位与点位以及与frame_index之间以单个空格分隔
```
示例内容如下:
```
0 503.8940124511719,639.3179931640625 1187.550048828125,633.2730102539062 1188.4599609375,987.6669921875 506.3169860839844,984.4979858398438
1 504.137939453125,639.2542114257812 1187.40087890625,633.1990356445312 1188.3466796875,987.4276123046875 506.54583740234375,984.2858276367188
2 504.4727783203125,639.2118530273438 1187.2799072265625,633.1328125 1188.2421875,987.1868896484375 506.9146728515625,984.0758056640625
3 504.7879943847656,639.1420288085938 1187.2020263671875,633.0950927734375 1188.15234375,986.9442138671875 507.22686767578125,983.8025512695312
4 505.0701904296875,639.1002197265625 1187.05078125,633.007080078125 1188.01953125,986.653564453125 507.496337890625,983.5907592773438
5 505.3311462402344,639.0217895507812 1186.8768310546875,632.93212890625 1187.8094482421875,986.3496704101562 507.75726318359375,983.26708984375
6 505.62005615234375,638.96337890625 1186.7620849609375,632.8793334960938 1187.7109375,986.0864868164062 508.0498046875,983.011474609375
7 505.88250732421875,638.8890380859375 1186.6134033203125,632.800537109375 1187.5517578125,985.7926635742188 508.31353759765625,982.7230224609375
...
```

### 运行 preview.py:

```
python preview.py baseline.mp4 results.txt
```

### 运行 evaluate.py:

```
python evaluate.py groundtruth.txt results.txt
```

## 提交注意事项

结果结构如下组织：
```
/
├── predict
│   ├── 0.txt
│   ├── 1.txt
│   ├── 2.txt
│   ├── 3.txt
│   ├── ...
│   └── n.txt
```
txt文件前缀名需与视频文件夹名保持一致

并打包成 predict.zip 提交


